<!DOCTYPE html>
<html>
<head>
    <title>Simple Page</title>
</head>
<body>
    <label class="switch">
        <input type="checkbox" id="myButton">
        <span class="slider"></span>
    </label>

    <script>
        document.getElementById("myButton").addEventListener("change", function () {
            var data = JSON.parse(localStorage.getItem('settings'));

            // Use the location as the query
            var api = data.port;
            var status = this.checked ? 'on' : 'off';
            var url = `http://${api}/pump/${status}`;
            
            console.log('Making GET request to:', url);
            fetch(url)
                .then(response => response.json())
                .then(data => console.log(data))
                .catch((error) => {
                    console.error('Error:', error);
                });
        });
    </script>
    
</body>
</html>