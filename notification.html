<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Notification Dropdown</title>
	<link rel="stylesheet" href="not-style.css">
	<script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <link href='https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css' rel='stylesheet'>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet'>
</head>
<body>
	<section class="section-50">
        <div class="container">
            <h3 class="m-b-50 heading-line">Notifications <i class="fa fa-bell text-muted"></i></h3>
    
            <div class="notification-ui_dd-content">
                
              
              
               
            </div>
    
            <div class="text-center">
                <a href="#!" class="dark-link">Load more activity</a>
            </div>
    
        </div>
    </section>
    <script>
        // Mocking the API endpoint
        // Retrieve the data from local storage
        var file = JSON.parse(localStorage.getItem("settings"));

        var route = file.port;

        var oldmsg = '';
        var socekt = new WebSocket(`ws://${route}:81`);
        socekt.onmessage = function (event) {
            // var notification = document.getElementById('status');

            if (oldmsg != event.data) {
                // notification.innerHTML += "<p>" + event.data + "</p>";

                var oldNotification = JSON.parse(localStorage.getItem("notification"));
                var xold = oldNotification.oldmsg;
                oldmsg = event.data;
                var notification = {
                    oldmsg: event.data + "/" + xold,

                };
                console.log("notification", notification);
                localStorage.setItem("notification", JSON.stringify(notification));
            }

        }



    </script>

</body>
</html>